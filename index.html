<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sistema Gamer</title>

<style>
/* ===== FUNDO ===== */
body{
  margin:0;
  font-family:Arial,sans-serif;
  background-image:url("fundo.jpg");
  background-size:cover;
  background-position:center;
  background-attachment:fixed;
  color:#fff;
}
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.6);
  z-index:-1;
}

/* ===== TELAS ===== */
.screen{display:none;min-height:100vh;align-items:center;justify-content:center;}
.active{display:flex}

/* ===== BOX ===== */
.box{
  background:#06172f;
  padding:20px;
  width:320px;
  border-radius:10px;
  text-align:center;
}
input,button{
  width:100%;
  padding:8px;
  margin-top:8px;
  border:none;
}
button{
  background:#00aaff;
  font-weight:bold;
  cursor:pointer;
}
.small{font-size:12px;color:#ccc;cursor:pointer}

/* ===== PLAYER BOX ===== */
#playerBox{
  position:fixed;
  top:10px;
  left:10px;
  width:230px;
  background:#06172f;
  padding:10px;
  z-index:10;
}

/* ===== AVATAR ===== */
#avatarWrapper{
  position:relative;
  width:90px;
  height:90px;
  margin:auto;
}
#avatar{
  width:90px;
  height:90px;
  position:relative;
  z-index:2;
}
#photoBtn{
  position:absolute;
  bottom:-6px;
  right:-6px;
  width:22px;
  height:22px;
  border-radius:50%;
  cursor:pointer;
}

/* ===== ADM BORDA ===== */
.adm-snake::before{
  content:"";
  position:absolute;
  inset:-6px;
  background:linear-gradient(90deg,#00ff88,#00ffaa,#00ff88);
  filter:blur(6px);
  animation:snake 2s linear infinite;
}
@keyframes snake{
  from{transform:rotate(0deg)}
  to{transform:rotate(360deg)}
}

/* ===== INFO ===== */
#playerName{font-weight:bold}
#playerName.premium{
  color:#00ffaa;
  text-shadow:0 0 8px #00ffaa;
}
#playerPremium{font-size:11px;color:#ffd700}
#playerCoins{color:gold}
#playerTime{font-size:11px}

/* ===== MENUS ===== */
.menu{
  position:fixed;
  right:10px;
  top:50%;
  transform:translateY(-50%);
  background:#021024;
  padding:10px;
  width:230px;
  display:none;
  z-index:9;
}
.hidden{display:none}

/* ===== FEEDBACK ===== */
.feedback{font-size:11px;height:14px}
.ok{color:#00ff88}
.err{color:#ff5555}

/* ===== BOTÃƒO RANK ===== */
#rankBtn{
  position:fixed;
  right:10px;
  bottom:20px;
  width:50px;
  height:50px;
  border-radius:50%;
  font-size:22px;
  background:#ffd700;
  cursor:pointer;
}
</style>
</head>

<body>

<!-- SONS -->
<audio id="soundError" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>
<audio id="soundSuccess" src="https://www.soundjay.com/buttons/sounds/button-4.mp3"></audio>

<!-- LOGIN -->
<div id="loginScreen" class="screen active">
  <div class="box">
    <h3>Login</h3>
    <input id="loginUser" placeholder="UsuÃ¡rio">
    <input id="loginPass" type="password" placeholder="Senha">
    <button onclick="login()">Entrar</button>
    <div class="small" onclick="goRegister()">Registrar</div>
    <div class="small" onclick="goRecover()">Esqueci a senha</div>
    <div id="loginMsg"></div>
  </div>
</div>

<!-- REGISTER -->
<div id="registerScreen" class="screen">
  <div class="box">
    <h3>Registrar</h3>
    <input id="regUser" placeholder="UsuÃ¡rio">
    <input id="regPass" type="password" placeholder="Senha">
    <button onclick="register()">Criar conta</button>
    <button onclick="goLogin()">Voltar</button>
    <div id="regMsg"></div>
  </div>
</div>

<!-- RECOVER -->
<div id="recoverScreen" class="screen">
  <div class="box">
    <h3>Recuperar senha</h3>
    <input id="recUser" placeholder="UsuÃ¡rio">
    <input id="recPass" type="password" placeholder="Nova senha">
    <button onclick="recover()">Salvar</button>
    <button onclick="goLogin()">Voltar</button>
    <div id="recMsg"></div>
  </div>
</div>

<!-- SITE -->
<div id="siteScreen" class="screen">

  <div id="playerBox">
    <div id="avatarWrapper">
      <img id="avatar" src="https://i.imgur.com/6VBx3io.png">
      <button id="photoBtn">ğŸ“·</button>
    </div>

    <div id="playerName"></div>
    <div id="playerPremium"></div>
    <div id="playerCoins"></div>
    <div id="playerTime"></div>

    <button onclick="toggleMenu('borderMenu')">ğŸ¨ Bordas</button>
    <button onclick="toggleMenu('inventoryMenu')">ğŸ’ InventÃ¡rio</button>
    <button onclick="toggleMenu('prizeMenu')">ğŸ† PrÃªmio</button>
    <button onclick="toggleMenu('adminMenu')" id="adminBtn">ğŸ‘‘ ADM</button>
    <button onclick="logout()">Sair</button>

    <div id="feedback" class="feedback"></div>
  </div>
</div>

<input type="file" id="photoInput" class="hidden" accept="image/*">

<!-- BORDAS -->
<div id="borderMenu" class="menu">
  <h3>Bordas</h3>
  <button onclick="buyBorder('Azul',100)">Azul â€“ 100</button>
  <button onclick="buyBorder('Roxa',500)">Roxa â€“ 500</button>
</div>

<!-- INVENTÃRIO -->
<div id="inventoryMenu" class="menu">
  <h3>ğŸ’ InventÃ¡rio</h3>
  <ul id="invList"></ul>
</div>

<!-- PRÃŠMIO -->
<div id="prizeMenu" class="menu">
  <h3>ğŸ† Premium</h3>
  <button onclick="buyPremium()">Comprar Premium (5000)</button>
</div>

<!-- ADM -->
<div id="adminMenu" class="menu">
  <h3>ğŸ‘‘ ADM</h3>
  <input id="giveUser" placeholder="Jogador">
  <input id="giveValue" type="number" placeholder="Moedas">
  <button onclick="giveMoney()">Dar dinheiro</button>
</div>

<!-- RANK -->
<button id="rankBtn" onclick="toggleMenu('rankMenu')">ğŸ†</button>
<div id="rankMenu" class="menu">
  <h3>Ranking</h3>
  <h4>â±ï¸ Tempo</h4>
  <ol id="rankTime"></ol>
  <h4>ğŸ’° Moedas</h4>
  <ol id="rankCoins"></ol>
</div>

<script>
const ADMIN="Rodolfo", ADMIN_PASS="rodolfo408*";
let users=JSON.parse(localStorage.getItem("users"))||{};
let currentUser=null,isADM=false;
let coins=0,time=0,timer;
let inventory=[],premium=false;

/* ===== TELAS ===== */
function show(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}
function goLogin(){show("loginScreen")}
function goRegister(){show("registerScreen")}
function goRecover(){show("recoverScreen")}

/* ===== REGISTER ===== */
function register(){
  const u=regUser.value.trim(), p=regPass.value.trim();
  if(!u||!p) return regMsg.innerText="Preencha tudo";
  if(users[u]) return regMsg.innerText="Nome jÃ¡ existe";
  users[u]=p;
  localStorage.setItem("users",JSON.stringify(users));
  regMsg.innerText="Conta criada!";
}

/* ===== LOGIN ===== */
function login(){
  const u=loginUser.value,p=loginPass.value;
  if(users[u]===p || (u===ADMIN&&p===ADMIN_PASS)){
    currentUser=u;
    isADM=(u===ADMIN&&p===ADMIN_PASS);
    localStorage.setItem("currentUser",u);
    enterSite();
  }else loginMsg.innerText="UsuÃ¡rio ou senha errada";
}

/* ===== RECOVER ===== */
function recover(){
  const u=recUser.value,p=recPass.value;
  if(!users[u]) return recMsg.innerText="UsuÃ¡rio nÃ£o existe";
  users[u]=p;
  localStorage.setItem("users",JSON.stringify(users));
  recMsg.innerText="Senha alterada!";
}

/* ===== SITE ===== */
function enterSite(){
  show("siteScreen");

  coins=isADM?Infinity:Number(localStorage.getItem("coins_"+currentUser))||0;
  time=Number(localStorage.getItem("time_"+currentUser))||0;
  inventory=JSON.parse(localStorage.getItem("inv_"+currentUser))||[];
  premium=localStorage.getItem("premium_"+currentUser)==="1";

  playerName.innerText=isADM?"ğŸ‘‘ "+currentUser+" (ADM)":currentUser;
  playerCoins.innerText="ğŸ’° "+(isADM?"âˆ":coins);
  playerTime.innerText="â±ï¸ "+time+"s";

  if(premium){
    playerPremium.innerText="â­ Premium";
    playerName.classList.add("premium");
  }else{
    playerPremium.innerText="";
    playerName.classList.remove("premium");
  }

  adminBtn.style.display=isADM?"block":"none";
  avatarWrapper.classList.toggle("adm-snake",isADM);

  const img=localStorage.getItem("avatar_"+currentUser);
  if(img) avatar.src=img;

  updateInv();
  updateRanking();

  clearInterval(timer);
  timer=setInterval(()=>{
    time++;
    localStorage.setItem("time_"+currentUser,time);
    playerTime.innerText="â±ï¸ "+time+"s";
    if(!isADM){
      coins++;
      localStorage.setItem("coins_"+currentUser,coins);
      playerCoins.innerText="ğŸ’° "+coins;
    }
    updateRanking();
  },1000);
}

/* ===== FOTO ===== */
photoBtn.onclick=()=>photoInput.click();
photoInput.onchange=e=>{
  const r=new FileReader();
  r.onload=()=>{
    avatar.src=r.result;
    localStorage.setItem("avatar_"+currentUser,r.result);
  }
  r.readAsDataURL(e.target.files[0]);
};

/* ===== MENUS ===== */
function toggleMenu(id){
  document.querySelectorAll(".menu").forEach(m=>m.style.display="none");
  const el=document.getElementById(id);
  el.style.display=el.style.display==="block"?"none":"block";
  if(id==="rankMenu") updateRanking();
}

/* ===== FEEDBACK + SOM ===== */
function msg(t,c){
  feedback.innerText=t;
  feedback.className="feedback "+c;
  if(c==="ok"){soundSuccess.play()}else{soundError.play()}
  setTimeout(()=>feedback.innerText="",2000);
}

/* ===== BORDAS ===== */
function buyBorder(name,price){
  if(!isADM&&coins<price) return msg("âŒ Sem dinheiro","err");
  if(!inventory.includes(name)){
    inventory.push(name);
    localStorage.setItem("inv_"+currentUser,JSON.stringify(inventory));
  }
  if(!isADM){
    coins-=price;
    localStorage.setItem("coins_"+currentUser,coins);
    playerCoins.innerText="ğŸ’° "+coins;
  }
  updateInv();
  msg("âœ” Compra realizada","ok");
}

/* ===== INVENTÃRIO ===== */
function updateInv(){
  invList.innerHTML="";
  inventory.forEach(i=>{
    const li=document.createElement("li");
    li.innerText=i;
    invList.appendChild(li);
  });
}

/* ===== PREMIUM ===== */
function buyPremium(){
  if(premium) return msg("âœ” JÃ¡ Ã© Premium","ok");
  if(!isADM&&coins<5000) return msg("âŒ Sem dinheiro","err");
  premium=true;
  localStorage.setItem("premium_"+currentUser,"1");
  playerPremium.innerText="â­ Premium";
  playerName.classList.add("premium");
  if(!isADM){
    coins-=5000;
    localStorage.setItem("coins_"+currentUser,coins);
    playerCoins.innerText="ğŸ’° "+coins;
  }
  msg("âœ” Compra realizada","ok");
}

/* ===== ADM ===== */
function giveMoney(){
  if(!isADM) return;
  const u=giveUser.value,v=Number(giveValue.value);
  const c=Number(localStorage.getItem("coins_"+u))||0;
  localStorage.setItem("coins_"+u,c+v);
  msg("âœ” Dinheiro enviado","ok");
}

/* ===== RANKING ===== */
function updateRanking(){
  const t=[],c=[];
  for(let k in localStorage){
    if(k.startsWith("time_")){
      t.push({u:k.replace("time_",""),v:Number(localStorage.getItem(k))||0});
    }
    if(k.startsWith("coins_")){
      c.push({u:k.replace("coins_",""),v:Number(localStorage.getItem(k))||0});
    }
  }
  t.sort((a,b)=>b.v-a.v);
  c.sort((a,b)=>b.v-a.v);

  rankTime.innerHTML="";
  rankCoins.innerHTML="";
  t.slice(0,10).forEach(x=>{
    const li=document.createElement("li");
    li.innerText=x.u+" â€” "+x.v+"s";
    rankTime.appendChild(li);
  });
  c.slice(0,10).forEach(x=>{
    const li=document.createElement("li");
    li.innerText=x.u+" â€” ğŸ’° "+x.v;
    rankCoins.appendChild(li);
  });
}

/* ===== AUTO LOGIN ===== */
const saved=localStorage.getItem("currentUser");
if(saved){
  currentUser=saved;
  isADM=(saved===ADMIN);
  enterSite();
}
</script>

</body>
</html>
