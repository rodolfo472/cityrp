<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sistema Gamer</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #0f172a;
    color: #e5e7eb;
}

/* PLAYER */
#playerBox {
    position: fixed;
    top: 10px;
    left: 10px;
    width: 130px;
    text-align: center;
    z-index: 1000;
}

#avatarImg {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: 3px solid #38bdf8;
    object-fit: cover;
}

#playerName {
    font-size: 12px;
    font-weight: bold;
}

#playerCoins {
    font-size: 11px;
    color: #facc15;
}

#playerTime {
    font-size: 10px;
    color: #94a3b8;
}

/* CONTAINER */
.container {
    background: #020617;
    max-width: 420px;
    margin: 150px auto;
    padding: 25px;
    border-radius: 10px;
    text-align: center;
}

input, button {
    width: 90%;
    padding: 10px;
    margin: 6px 0;
    border-radius: 6px;
    border: none;
}

button {
    background: #38bdf8;
    font-weight: bold;
    cursor: pointer;
}

.hidden { display: none; }

.smallWarn {
    font-size: 10px;
    color: #f87171;
}

/* ADM */
#adminPanel {
    background: #020617;
    border: 1px solid gold;
    border-radius: 8px;
    padding: 10px;
    margin-top: 10px;
    font-size: 12px;
}

/* ALERTA */
#alertMini {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #020617;
    border: 1px solid #f87171;
    color: #f87171;
    font-size: 11px;
    padding: 6px 10px;
    border-radius: 6px;
    display: none;
}
</style>
</head>

<body>

<div id="playerBox" class="hidden">
    <img id="avatarImg">
    <div id="playerName"></div>
    <div id="playerCoins"></div>
    <div id="playerTime"></div>
</div>

<div class="container">

    <div id="menu">
        <button onclick="showLogin()">Login</button>
        <button onclick="showRegister()">Registrar</button>
    </div>

    <div id="loginBox" class="hidden">
        <input id="loginUser" placeholder="Usu√°rio">
        <input type="password" id="loginPass" placeholder="Senha">
        <button onclick="login()">Entrar</button>
        <button onclick="goMenu()">Voltar</button>
    </div>

    <div id="registerBox" class="hidden">
        <input id="regUser" placeholder="Usu√°rio">
        <input type="password" id="regPass" placeholder="Senha">
        <div id="passWarn" class="smallWarn"></div>
        <button onclick="register()">Criar conta</button>
        <button onclick="goMenu()">Voltar</button>
    </div>

    <div id="site" class="hidden">
        <button onclick="logout()">Sair</button>

        <!-- PAINEL ADM -->
        <div id="adminPanel" class="hidden">
            <h4>üëë ADM ‚àû</h4>
            <input id="giveUser" placeholder="Nome do jogador">
            <input id="giveCoins" type="number" placeholder="Quantidade">
            <button onclick="giveMoney()">Dar dinheiro</button>
        </div>
    </div>

</div>

<div id="alertMini">A√ß√£o n√£o permitida ‚ùå</div>

<script>
const ADMIN_USER = "Rodolfo";
const ADMIN_PASS = "rodolfo408*";

let users = JSON.parse(localStorage.getItem("users")) || {};
let loggedUser = localStorage.getItem("loggedUser");
let coins = 0;
let timer, startTime;

window.onload = () => {
    if (loggedUser) enterSite(loggedUser);
    else showOnly("menu");
};

function showOnly(id){
    ["menu","loginBox","registerBox","site"].forEach(e=>{
        document.getElementById(e).classList.add("hidden");
    });
    document.getElementById(id).classList.remove("hidden");
}

function showLogin(){ showOnly("loginBox"); }
function showRegister(){ showOnly("registerBox"); }
function goMenu(){ showOnly("menu"); }

/* REGISTRO */
function register(){
    const u = regUser.value.trim();
    const p = regPass.value.trim();
    passWarn.innerText = "";

    if (!u || !p) return;

    if (users[u]) {
        passWarn.innerText = "Nome j√° existe";
        return;
    }

    if (Object.values(users).includes(p)) {
        passWarn.innerText = "Senha j√° existe";
        return;
    }

    users[u] = p;
    localStorage.setItem("users", JSON.stringify(users));
    localStorage.setItem("loggedUser", u);
    enterSite(u);
}

/* LOGIN */
function login(){
    const u = loginUser.value;
    const p = loginPass.value;

    if (users[u] === p || (u===ADMIN_USER && p===ADMIN_PASS)) {
        localStorage.setItem("loggedUser", u);
        enterSite(u);
    } else {
        showAlert();
    }
}

/* SITE */
function enterSite(user){
    loggedUser = user;
    showOnly("site");

    playerBox.classList.remove("hidden");
    playerName.innerText = user === ADMIN_USER ? "üëë Rodolfo (ADM ‚àû)" : user;

    if (user === ADMIN_USER) {
        coins = Infinity;
        playerCoins.innerText = "üí∞ ‚àû";
        adminPanel.classList.remove("hidden");
    } else {
        coins = parseInt(localStorage.getItem("coins_"+user)) || 0;
        playerCoins.innerText = "üí∞ " + coins;
        adminPanel.classList.add("hidden");
    }

    startTimers();
}

/* TEMPO + MOEDAS */
function startTimers(){
    clearInterval(timer);
    startTime = Date.now();

    timer = setInterval(()=>{
        let s = Math.floor((Date.now()-startTime)/1000);
        playerTime.innerText = `‚è±Ô∏è ${s}s`;

        if (loggedUser !== ADMIN_USER) {
            coins++;
            localStorage.setItem("coins_"+loggedUser, coins);
            playerCoins.innerText = "üí∞ " + coins;
        }
    },1000);
}

/* ADM DAR DINHEIRO */
function giveMoney(){
    const u = giveUser.value;
    const v = parseInt(giveCoins.value);

    if (!u || isNaN(v)) return;

    const current = parseInt(localStorage.getItem("coins_"+u)) || 0;
    localStorage.setItem("coins_"+u, current + v);
    alert("üí∞ Dinheiro enviado!");
}

/* LOGOUT */
function logout(){
    localStorage.removeItem("loggedUser");
    location.reload();
}

/* ALERTA */
function showAlert(){
    alertMini.style.display="block";
    setTimeout(()=>alertMini.style.display="none",2000);
}
</script>

</body>
</html>
