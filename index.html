<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sistema Gamer Completo</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#0b1020;
  color:#fff;
}
.screen{display:none;min-height:100vh;align-items:center;justify-content:center}
.active{display:flex}

.box{
  background:#06172f;
  width:440px;
  padding:15px;
  border-radius:12px;
  text-align:center;
}

.menu{
  display:flex;
  gap:5px;
  margin-bottom:10px;
}
.menu button{flex:1}

.section{display:none}
.section.active{display:block}

/* PERFIL */
.avatar{
  width:100px;height:100px;
  border-radius:50%;
  background:#444;
  margin:10px auto;
  border:6px solid transparent;
  overflow:hidden;
}
.avatar img{width:100%;height:100%;object-fit:cover}

/* BORDAS */
.border{
  width:50px;height:50px;
  border-radius:50%;
  border:5px solid;
  cursor:pointer;
}
.gold{border-color:gold}
.blue{border-color:#00aaff}
.red{border-color:#ff4444}
.admin{border-color:gold;box-shadow:0 0 10px gold}
.premium{border-color:#ff00ff;box-shadow:0 0 10px #ff00ff}

.borders,.inventory{
  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:wrap;
}

input,button{
  width:100%;
  padding:8px;
  margin-top:6px;
  border:none;
  border-radius:5px;
}
button{background:#1c4cff;color:#fff}

/* ADM */
#admMenuBtn{
  position:fixed;
  right:10px;
  top:50%;
  transform:translateY(-50%);
  background:#ff4444;
  padding:10px;
  border-radius:8px;
  display:none;
  cursor:pointer;
}
#admMenuPanel{
  position:fixed;
  right:70px;
  top:50%;
  transform:translateY(-50%);
  background:#020a18;
  padding:15px;
  width:260px;
  border-radius:10px;
  display:none;
}

/* RANKING */
.rank-item{
  background:#020a18;
  padding:8px;
  margin:6px 0;
  border-radius:6px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="screen active" id="loginScreen">
  <div class="box">
    <h2>Login</h2>
    <input id="loginName" placeholder="Nome">
    <input id="loginPass" type="password" placeholder="Senha">
    <button onclick="login()">Entrar</button>
  </div>
</div>

<!-- JOGO -->
<div class="screen" id="gameScreen">
  <div class="box">

    <div class="menu">
      <button onclick="openSec('perfil')">Perfil</button>
      <button onclick="openSec('loja')">Loja</button>
      <button onclick="openSec('inventario')">Invent√°rio</button>
      <button onclick="openSec('premium')">Premium</button>
      <button onclick="openSec('foto')">Foto</button>
      <button onclick="openSec('ranking')">Ranking</button>
    </div>

    <!-- PERFIL -->
    <div class="section active" id="perfil">
      <div class="avatar" id="avatar"></div>
      <h3 id="nome"></h3>
      <p>üí∞ Dinheiro: <span id="coins"></span></p>
      <p id="status"></p>
    </div>

    <!-- LOJA -->
    <div class="section" id="loja">
      <h3>Bordas</h3>
      <div class="borders">
        <div class="border gold" onclick="buyBorder('gold',200)"></div>
        <div class="border blue" onclick="buyBorder('#00aaff',150)"></div>
        <div class="border red" onclick="buyBorder('#ff4444',100)"></div>
      </div>
    </div>

    <!-- INVENT√ÅRIO -->
    <div class="section" id="inventario">
      <h3>Invent√°rio</h3>
      <div class="inventory" id="inv"></div>
    </div>

    <!-- PREMIUM -->
    <div class="section" id="premium">
      <h3>üíé Premium</h3>
      <p>Dinheiro infinito + borda exclusiva</p>
      <button onclick="buyPremium()">Comprar Premium</button>
    </div>

    <!-- FOTO -->
    <div class="section" id="foto">
      <h3>Foto de Perfil</h3>
      <input type="file" accept="image/*" onchange="setPhoto(event)">
    </div>

    <!-- RANKING -->
    <div class="section" id="ranking">
      <h3>üèÜ Ranking Global</h3>
      <div id="rankingList"></div>
    </div>

  </div>
</div>

<!-- ADM -->
<div id="admMenuBtn" onclick="toggleAdm()">ADM MENU</div>

<div id="admMenuPanel">
  <h3>üëë ADM</h3>
  <button onclick="givePremium()">Dar Premium</button>
</div>

<script>
// ================= BANCO LOCAL =================
let playersDB = JSON.parse(localStorage.getItem("playersDB")||"[]");

let users=[{name:"Rodolfo",pass:"rodolfo408*",admin:true}];
let user=null;

// AUTO LOGIN
let saved=localStorage.getItem("user");
if(saved){
  user=JSON.parse(saved);
  start();
}

// LOGIN
function login(){
  let u=users.find(x=>x.name===loginName.value && x.pass===loginPass.value);
  if(!u){alert("Login inv√°lido");return;}

  user={
    name:u.name,
    admin:u.admin,
    premium:false,
    coins:999999,
    inventory:u.admin?["ADMIN"]:[],
    equipped:null,
    photo:null
  };

  saveUser();
  start();
}

// START
function start(){
  loginScreen.classList.remove("active");
  gameScreen.classList.add("active");
  nome.innerText=user.name;
  coins.innerText=user.premium||user.admin?"‚àû":user.coins;
  status.innerText=user.admin?"üëë ADM":user.premium?"üíé Premium":"Jogador";

  if(user.photo){
    avatar.innerHTML=`<img src="${user.photo}">`;
  }

  if(user.admin) admMenuBtn.style.display="block";
  updateDB();
}

// MENU
function openSec(id){
  document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  if(id==="inventario") renderInv();
  if(id==="ranking") renderRanking();
}

// BORDAS
function buyBorder(color){
  if(!user.equipped) user.equipped=color;
  else user.inventory.push(color);
  avatar.style.borderColor=color;
  saveUser();
}

// INVENT√ÅRIO
function renderInv(){
  inv.innerHTML="";
  user.inventory.forEach(b=>{
    let d=document.createElement("div");
    d.className="border";
    if(b==="ADMIN") d.classList.add("admin");
    else if(b==="PREMIUM") d.classList.add("premium");
    else d.style.borderColor=b;
    d.onclick=()=>equip(b);
    inv.appendChild(d);
  });
}

function equip(b){
  if(user.equipped) user.inventory.push(user.equipped);
  user.inventory=user.inventory.filter(x=>x!==b);
  user.equipped=b;
  avatar.style.borderColor=b==="ADMIN"?"gold":b==="PREMIUM"?"#ff00ff":b;
  saveUser();
}

// PREMIUM
function buyPremium(){
  user.premium=true;
  if(!user.inventory.includes("PREMIUM")) user.inventory.push("PREMIUM");
  coins.innerText="‚àû";
  status.innerText="üíé Premium";
  saveUser();
}

// FOTO
function setPhoto(e){
  let r=new FileReader();
  r.onload=()=>{
    user.photo=r.result;
    avatar.innerHTML=`<img src="${r.result}">`;
    saveUser();
  };
  r.readAsDataURL(e.target.files[0]);
}

// ADM
function toggleAdm(){
  admMenuPanel.style.display=admMenuPanel.style.display==="block"?"none":"block";
}
function givePremium(){
  user.premium=true;
  if(!user.inventory.includes("PREMIUM")) user.inventory.push("PREMIUM");
  saveUser();
  alert("Premium dado");
}

// RANKING
function updateDB(){
  let i=playersDB.findIndex(p=>p.name===user.name);
  if(i>=0) playersDB[i]=user;
  else playersDB.push(user);
  localStorage.setItem("playersDB",JSON.stringify(playersDB));
}

function renderRanking(){
  rankingList.innerHTML="";
  let sorted=[...playersDB].sort((a,b)=>{
    if(a.coins===Infinity) return -1;
    if(b.coins===Infinity) return 1;
    return b.coins-a.coins;
  });

  sorted.forEach((p,i)=>{
    let d=document.createElement("div");
    d.className="rank-item";
    d.innerHTML=`${i+1}¬∫ ${p.name} - ${p.admin?"ADM":p.premium?"Premium":"Jogador"} - üí∞ ${p.premium||p.admin?"‚àû":p.coins}`;
    rankingList.appendChild(d);
  });
}

// SALVAR
function saveUser(){
  localStorage.setItem("user",JSON.stringify(user));
  updateDB();
}
</script>

</body>
</html>
