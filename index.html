<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sistema Gamer</title>

<style>
body{margin:0;font-family:Arial;background:#0b1020;color:#fff}
.screen{display:none;min-height:100vh;align-items:center;justify-content:center}
.active{display:flex}
.box{background:#06172f;width:480px;padding:15px;border-radius:12px;text-align:center}

.menu{display:flex;gap:5px;margin-bottom:10px;flex-wrap:wrap}
.menu button{flex:1}

.section{display:none}
.section.active{display:block}

.avatar{
  width:100px;height:100px;border-radius:50%;
  background:#444;margin:10px auto;
  border:6px solid transparent;
  overflow:hidden
}
.avatar img{width:100%;height:100%;object-fit:cover}

.border{width:50px;height:50px;border-radius:50%;border:5px solid;cursor:pointer}
.borders,.inventory{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}

input,button{width:100%;padding:8px;margin-top:6px;border:none;border-radius:5px}
button{background:#1c4cff;color:#fff}

#admBtn{
  position:fixed;right:10px;top:50%;
  transform:translateY(-50%);
  background:#ff4444;padding:12px;
  border-radius:10px;display:none;
  cursor:pointer;z-index:1000
}
#admPanel{
  position:fixed;right:80px;top:50%;
  transform:translateY(-50%);
  background:#020a18;padding:15px;
  width:260px;border-radius:12px;
  display:none;z-index:1000
}

.rank{background:#020a18;padding:8px;margin:6px 0;border-radius:6px}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="screen active" id="loginScreen">
  <div class="box">
    <h2>Login</h2>
    <input id="loginName" placeholder="Nome">
    <input id="loginPass" type="password" placeholder="Senha">
    <button onclick="login()">Entrar</button>
    <button onclick="goRegister()">Criar conta</button>
  </div>
</div>

<!-- REGISTRO -->
<div class="screen" id="registerScreen">
  <div class="box">
    <h2>Registro</h2>
    <input id="regName" placeholder="Nome">
    <input id="regPass" type="password" placeholder="Senha">
    <button onclick="register()">Registrar</button>
    <button onclick="backLogin()">Voltar</button>
  </div>
</div>

<!-- JOGO -->
<div class="screen" id="gameScreen">
  <div class="box">

    <div class="menu">
      <button onclick="openSec('perfil')">Perfil</button>
      <button onclick="openSec('loja')">Loja</button>
      <button onclick="openSec('inventario')">InventÃ¡rio</button>
      <button onclick="openSec('premium')">Premium</button>
      <button onclick="openSec('foto')">Foto</button>
      <button onclick="openSec('ranking')">Ranking</button>
      <button onclick="openSec('apps')">ðŸŽ® Central de Jogos</button>
    </div>

    <!-- PERFIL -->
    <div class="section active" id="perfil">
      <div class="avatar" id="avatar"></div>
      <h3 id="nome"></h3>
      <p>ðŸ’° Dinheiro do site: <span id="coins"></span></p>

      <input id="valorResgate" type="number" placeholder="Valor para resgatar">
      <button onclick="resgatar()">ðŸ’¸ Resgatar</button>
      <p id="msgResgate"></p>

      <p id="status"></p>
      <p id="device"></p>
    </div>

    <!-- LOJA -->
    <div class="section" id="loja">
      <div class="borders">
        <div class="border" style="border-color:gold" onclick="buyBorder('gold')"></div>
        <div class="border" style="border-color:#00aaff" onclick="buyBorder('#00aaff')"></div>
        <div class="border" style="border-color:#ff4444" onclick="buyBorder('#ff4444')"></div>
      </div>
    </div>

    <!-- INVENTÃRIO -->
    <div class="section" id="inventario">
      <div class="inventory" id="inv"></div>
    </div>

    <!-- PREMIUM -->
    <div class="section" id="premium">
      <button onclick="buyPremium()">Ativar Premium</button>
    </div>

    <!-- FOTO -->
    <div class="section" id="foto">
      <input type="file" accept="image/*" onchange="setPhoto(event)">
    </div>

    <!-- RANKING -->
    <div class="section" id="ranking">
      <div id="rankList"></div>
    </div>

  </div>
</div>

<!-- ADM -->
<div id="admBtn" onclick="toggleAdm()">ADM MENU</div>

<div id="admPanel">
  <h3>ðŸ‘‘ PAINEL ADM</h3>

  <h4>Dar dinheiro</h4>
  <input id="admMoneyName" placeholder="Jogador">
  <input id="admMoneyValue" type="number" placeholder="Quantia">
  <button onclick="admGiveMoney()">Enviar dinheiro</button>

  <h4>Dar ADM</h4>
  <input id="admAdminName" placeholder="Jogador">
  <input id="admAdminDays" type="number" placeholder="Dias">
  <button onclick="admGiveAdmin()">Dar ADM</button>

  <h4>Gerar cÃ³digo de dinheiro</h4>
  <input id="moneyValue" type="number" placeholder="Quantia">
  <button onclick="generateCode()">Gerar CÃ³digo</button>
  <p id="moneyCode"></p>
</div>

<script>
const ADM_NAME="Rodolfo";
const ADM_PASS="rodolfo408*";

let players=JSON.parse(localStorage.getItem("playersDB")||"[]");
let moneyCodes=JSON.parse(localStorage.getItem("moneyCodes")||"{}");
let user=null;

// AUTO LOGIN
let saved=localStorage.getItem("user");
if(saved){user=JSON.parse(saved);start();}

function detectDevice(){
  return /mobile/i.test(navigator.userAgent)?"ðŸ“± Mobile":"ðŸ’» PC";
}

function login(){
  let n=loginName.value,p=loginPass.value;
  if(n===ADM_NAME&&p===ADM_PASS){
    user={name:n,coins:"0",admin:true,premium:false,inventory:[],photo:null,device:detectDevice()};
    saveAll();start();return;
  }
  let u=players.find(x=>x.name===n&&x.pass===p);
  if(!u){alert("Login invÃ¡lido");return;}
  user=u;start();
}

function goRegister(){
  loginScreen.classList.remove("active");
  registerScreen.classList.add("active");
}

function backLogin(){
  registerScreen.classList.remove("active");
  loginScreen.classList.add("active");
}

function register(){
  if(players.find(x=>x.name===regName.value)){alert("Nome jÃ¡ existe");return;}
  user={name:regName.value,pass:regPass.value,coins:"0",admin:false,premium:false,inventory:[],photo:null,device:detectDevice()};
  players.push(user);saveAll();start();
}

function start(){
  loginScreen.classList.remove("active");
  registerScreen.classList.remove("active");
  gameScreen.classList.add("active");

  nome.innerText=user.name;
  coins.innerText=user.coins;
  status.innerText=user.admin?"ðŸ‘‘ ADM":user.premium?"ðŸ’Ž Premium":"Jogador";
  device.innerText=user.device;

  if(user.photo) avatar.innerHTML=`<img src="${user.photo}">`;
  if(user.equipped) avatar.style.borderColor=user.equipped;
  if(user.admin) admBtn.style.display="block";

  saveAll();
}

function openSec(id){
  if(id==="apps"){window.location.href="painel.html";return;}
  document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  if(id==="inventario") renderInv();
  if(id==="ranking") renderRank();
}

function buyBorder(c){if(!user.inventory.includes(c))user.inventory.push(c);equip(c)}
function equip(c){user.equipped=c;avatar.style.borderColor=c;saveAll()}
function renderInv(){
  inv.innerHTML="";
  user.inventory.forEach(b=>{
    let d=document.createElement("div");
    d.className="border";d.style.borderColor=b;
    d.onclick=()=>equip(b);inv.appendChild(d);
  });
}

function buyPremium(){user.premium=true;saveAll()}

function setPhoto(e){
  let r=new FileReader();
  r.onload=()=>{user.photo=r.result;avatar.innerHTML=`<img src="${r.result}">`;saveAll()}
  r.readAsDataURL(e.target.files[0]);
}

function resgatar(){
  let msg=msgResgate;
  let v=valorResgate.value;
  let saldo=BigInt(user.coins);
  if(!v||BigInt(v)<=0n){msg.innerText="Digite um valor vÃ¡lido";return;}
  if(BigInt(v)>saldo){msg.innerText="VocÃª nÃ£o tem dinheiro suficiente.";return;}
  user.coins=(saldo-BigInt(v)).toString();
  coins.innerText=user.coins;
  msg.style.color="lime";
  msg.innerText="Robux foi resgatado para sua conta, chegarÃ¡ daqui a um ano.";
  saveAll();
}

function toggleAdm(){admPanel.style.display=admPanel.style.display==="block"?"none":"block"}
function admGiveMoney(){
  let p=players.find(x=>x.name===admMoneyName.value);
  if(!p){alert("Jogador nÃ£o encontrado");return;}
  p.coins=(BigInt(p.coins)+BigInt(admMoneyValue.value)).toString();
  saveAll();alert("Dinheiro enviado");
}
function admGiveAdmin(){
  let p=players.find(x=>x.name===admAdminName.value);
  if(!p){alert("Jogador nÃ£o encontrado");return;}
  p.admin=true;p.adminUntil=Date.now()+admAdminDays.value*86400000;
  saveAll();alert("ADM concedido");
}
function generateCode(){
  let c="DIN-"+Math.random().toString(36).substr(2,6).toUpperCase();
  moneyCodes[c]=moneyValue.value;
  moneyCode.innerText=c;
  saveAll();
}

function renderRank(){
  rankList.innerHTML="";
  [...players].sort((a,b)=>BigInt(b.coins)-BigInt(a.coins))
    .forEach((p,i)=>rankList.innerHTML+=`<div class="rank">${i+1}Âº ${p.name} - ðŸ’° ${p.coins}</div>`);
}

function saveAll(){
  let i=players.findIndex(p=>p.name===user.name);
  if(i>=0) players[i]=user; else players.push(user);
  localStorage.setItem("playersDB",JSON.stringify(players));
  localStorage.setItem("user",JSON.stringify(user));
  localStorage.setItem("moneyCodes",JSON.stringify(moneyCodes));
}
</script>

</body>
</html>
