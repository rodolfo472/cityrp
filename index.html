<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sistema Gamer</title>

<style>
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:#020b1c;
  color:#fff;
}

/* TELAS */
.screen{
  display:none;
  min-height:100vh;
  align-items:center;
  justify-content:center;
}

.active{
  display:flex;
}

/* BOX */
.box{
  background:#06172f;
  padding:20px;
  width:300px;
  border-radius:10px;
  text-align:center;
}

input,button{
  width:100%;
  padding:8px;
  margin-top:8px;
  border:none;
}

button{
  background:#00aaff;
  font-weight:bold;
  cursor:pointer;
}

/* PLAYER */
#playerBox{
  position:fixed;
  top:10px;
  left:10px;
  background:#06172f;
  padding:10px;
  width:200px;
}

#playerName{font-weight:bold}
#playerCoins{color:gold}
#playerTime{font-size:12px}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginScreen" class="screen active">
  <div class="box">
    <h3>Login</h3>
    <input id="loginUser" placeholder="Usu√°rio">
    <input id="loginPass" type="password" placeholder="Senha">
    <button onclick="login()">Entrar</button>
    <button onclick="goRegister()">Registrar</button>
    <div id="loginMsg"></div>
  </div>
</div>

<!-- REGISTER -->
<div id="registerScreen" class="screen">
  <div class="box">
    <h3>Registrar</h3>
    <input id="regUser" placeholder="Usu√°rio">
    <input id="regPass" type="password" placeholder="Senha">
    <button onclick="register()">Criar conta</button>
    <button onclick="goLogin()">Voltar</button>
    <div id="regMsg"></div>
  </div>
</div>

<!-- SITE -->
<div id="siteScreen" class="screen">
  <div id="playerBox">
    <div id="playerName"></div>
    <div id="playerCoins"></div>
    <div id="playerTime"></div>
    <button onclick="logout()">Sair</button>
  </div>
</div>

<script>
const ADMIN_USER="Rodolfo";
const ADMIN_PASS="rodolfo408*";

/* DADOS */
let users=JSON.parse(localStorage.getItem("users"))||{};
let currentUser=localStorage.getItem("currentUser");
let coins=0,time=0,timer;

/* AUTO LOGIN */
if(currentUser){
  enterSite(currentUser);
}

/* TELAS */
function show(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function goRegister(){show("registerScreen")}
function goLogin(){show("loginScreen")}

/* REGISTER */
function register(){
  const u=regUser.value.trim();
  const p=regPass.value.trim();

  if(!u||!p){
    regMsg.innerText="Preencha tudo";
    return;
  }
  if(users[u]){
    regMsg.innerText="Nome j√° existe";
    return;
  }

  users[u]=p;
  localStorage.setItem("users",JSON.stringify(users));
  regMsg.innerText="Conta criada!";
}

/* LOGIN */
function login(){
  const u=loginUser.value;
  const p=loginPass.value;

  if(users[u]===p || (u===ADMIN_USER && p===ADMIN_PASS)){
    localStorage.setItem("currentUser",u);
    enterSite(u);
  }else{
    loginMsg.innerText="Usu√°rio ou senha errada";
  }
}

/* SITE */
function enterSite(u){
  currentUser=u;
  show("siteScreen");

  coins = u===ADMIN_USER ? Infinity : Number(localStorage.getItem("coins_"+u))||0;
  time = Number(localStorage.getItem("time_"+u))||0;

  playerName.innerText = u===ADMIN_USER ? "üëë "+u+" (ADM)" : u;
  playerCoins.innerText = "üí∞ "+(coins===Infinity?"‚àû":coins);
  playerTime.innerText = "‚è±Ô∏è "+time+"s";

  clearInterval(timer);
  timer=setInterval(()=>{
    time++;
    localStorage.setItem("time_"+u,time);
    playerTime.innerText="‚è±Ô∏è "+time+"s";

    if(u!==ADMIN_USER){
      coins++;
      localStorage.setItem("coins_"+u,coins);
      playerCoins.innerText="üí∞ "+coins;
    }
  },1000);
}

/* LOGOUT */
function logout(){
  localStorage.removeItem("currentUser");
  location.reload();
}
</script>

</body>
</html>
